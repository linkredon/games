$(function(){$.ajax({url:SITE_SALES_ROOT_PI+"/cart_sidebar_display_ajax.php",dataType:"jsonp",success:function(data){$("#cart_count2").html(data.cart_total_count);}});var qtip_defaults={style:{classes:'qtip-green qtip-rounded qtip-add-to-cart'},position:{my:'right center',at:'left center'},timeout:10000}
$('.add_anywhere').click(function(){var productid=$(this).attr("rel");var curr_qty=1;if($("#login_value").length>0){var login_mode=$("#login_value").val();}else{var login_mode=$("#mode").val();}
var DOM_element=$(this);DOM_element.attr("disabled",true);DOM_element.addClass("add_anywhere_loading");$("body").css("cursor","progress");$.ajax({url:SITE_SALES_ROOT_PI+'/cart_product_ajax.php',type:'POST',data:{product:productid,qty:curr_qty,mode:login_mode},dataType:'jsonp',success:function(data){if(data.success){if(data.error_message){show_cart_feedback(DOM_element,data.error_message,{style:{classes:'qtip qtip-rounded qtip-add-to-cart'}});}else{show_cart_feedback(DOM_element,data.feedback);}
$("#cart_count2").html(data.cart_total_count);DOM_element.removeClass("add_anywhere_loading");}else{show_cart_feedback(DOM_element,data.error_message,{style:{classes:'qtip-red qtip-rounded qtip-add-to-cart'}});}
DOM_element.attr("disabled",false);$("body").css("cursor","auto");},failure:function(){alert('Could not contact server to add to your quantity.');$("body").css("cursor","auto");}});return false;});function show_cart_feedback(DOM_element,html,qtip_styling_object){var current_settings={};jQuery.extend(current_settings,qtip_defaults,qtip_styling_object);DOM_element.qtip({content:{text:html},position:{my:current_settings.position.my,at:current_settings.position.at,target:DOM_element},show:{event:'mouseenter',delay:0,solo:false,ready:true},style:{classes:current_settings.style.classes,}});setTimeout(function(){DOM_element.qtip('hide',true);DOM_element.qtip('destroy',true);},current_settings.timeout);}});