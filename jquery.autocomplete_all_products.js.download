$(function(){$("input#product_searchbox").autocomplete({source:function(request,response){$.ajax({url:SALES_ROOT+"/autocomplete/products_only.php",type:"GET",dataType:"jsonp",data:request,success:function(data,textStatus,jqXHR){if(data.F==true){$("input#product_searchbox").autocomplete("close");}else{var suggestions=[];$.each(data,function(index,value){suggestions.push(value);});response(suggestions);}},error:function(jqXHR,textStatus,errorThrown){}});},select:function(event,ui){if(ui.item.max_suggestions==true){window.location=SALES_ROOT+'/cardsearch.php?game_type=1&auto=Y&singlesearch='+ ui.item.name;}else{$("input#product_searchbox").val(ui.item.name);$("form[name=search_form]").append('<input name="auto" type="hidden" value="Y">');$("form[name=search_form]").submit();}
return false;},minLength:1,delay:150}).data("ui-autocomplete")._renderItem=function(ul,item){if(item.max_suggestions==true){return $("<li></li>").data("ui-autocomplete-item",item).append("<a><strong>"+ item.matches+" product matches for \""+ item.name+"\"!</strong><br><span class='teasertext'>Click here to search!</a></span></a>").appendTo(ul);}else{line_information="<div><a>";if(typeof item.name!=='undefined'&&item.name!=""){line_information+="<strong>"+ item.name+"</strong>";if(typeof item.text!=='undefined'&&item.text!=""){line_information+="<br><span class='teasertext'>"+ item.text+"</span>";}}
line_information+="</a></div>";return $("<li></li>").data("ui-autocomplete-item",item).append(line_information).appendTo(ul);}};});